{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/jessica/Desktop/common_ground/src/screens/HomeScreen/HomeScreen.js\";\nimport React, { useEffect, useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport styles from \"./styles\";\nimport { firebase } from \"../../firebase/config\";\nexport default function HomeScreen(props) {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    entityText = _useState2[0],\n    setEntityText = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    entities = _useState4[0],\n    setEntities = _useState4[1];\n  var entityRef = firebase.firestore().collection('entities');\n  var userID = props.extraData.id;\n  useEffect(function () {\n    entityRef.where(\"authorID\", \"==\", userID).orderBy('createdAt', 'desc').onSnapshot(function (querySnapshot) {\n      var newEntities = [];\n      querySnapshot.forEach(function (doc) {\n        var entity = doc.data();\n        entity.id = doc.id;\n        newEntities.push(entity);\n      });\n      setEntities(newEntities);\n    }, function (error) {\n      console.log(error);\n    });\n  }, []);\n  var onAddButtonPress = function onAddButtonPress() {\n    if (entityText && entityText.length > 0) {\n      var timestamp = firebase.firestore.FieldValue.serverTimestamp();\n      var data = {\n        text: entityText,\n        authorID: userID,\n        createdAt: timestamp\n      };\n      entityRef.add(data).then(function (_doc) {\n        setEntityText('');\n        Keyboard.dismiss();\n      }).catch(function (error) {\n        alert(error);\n      });\n    }\n  };\n  var renderEntity = function renderEntity(_ref) {\n    var item = _ref.item,\n      index = _ref.index;\n    return React.createElement(View, {\n      style: styles.entityContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }\n    }, React.createElement(Text, {\n      style: styles.entityText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }\n    }, index, \". \", item.text));\n  };\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.formContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, React.createElement(TextInput, {\n    style: styles.input,\n    placeholder: \"Add new entity\",\n    placeholderTextColor: \"#aaaaaa\",\n    onChangeText: function onChangeText(text) {\n      return setEntityText(text);\n    },\n    value: entityText,\n    underlineColorAndroid: \"transparent\",\n    autoCapitalize: \"none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.button,\n    onPress: onAddButtonPress,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"Add\"))), entities && React.createElement(View, {\n    style: styles.listContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, React.createElement(FlatList, {\n    data: entities,\n    renderItem: renderEntity,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    removeClippedSubviews: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  })));\n}","map":{"version":3,"names":["React","useEffect","useState","styles","firebase","HomeScreen","props","entityText","setEntityText","entities","setEntities","entityRef","firestore","collection","userID","extraData","id","where","orderBy","onSnapshot","querySnapshot","newEntities","forEach","doc","entity","data","push","error","console","log","onAddButtonPress","length","timestamp","FieldValue","serverTimestamp","text","authorID","createdAt","add","then","_doc","Keyboard","dismiss","catch","alert","renderEntity","item","index","entityContainer","container","formContainer","input","button","buttonText","listContainer"],"sources":["/Users/jessica/Desktop/common_ground/src/screens/HomeScreen/HomeScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { FlatList, Keyboard, Text, TextInput, TouchableOpacity, View } from 'react-native'\nimport styles from './styles';\nimport { firebase } from '../../firebase/config'\n\nexport default function HomeScreen(props) {\n\n    const [entityText, setEntityText] = useState('')\n    const [entities, setEntities] = useState([])\n\n    const entityRef = firebase.firestore().collection('entities')\n    const userID = props.extraData.id\n\n    useEffect(() => {\n        entityRef\n            .where(\"authorID\", \"==\", userID)\n            .orderBy('createdAt', 'desc')\n            .onSnapshot(\n                querySnapshot => {\n                    const newEntities = []\n                    querySnapshot.forEach(doc => {\n                        const entity = doc.data()\n                        entity.id = doc.id\n                        newEntities.push(entity)\n                    });\n                    setEntities(newEntities)\n                },\n                error => {\n                    console.log(error)\n                }\n            )\n    }, [])\n\n    const onAddButtonPress = () => {\n        if (entityText && entityText.length > 0) {\n            const timestamp = firebase.firestore.FieldValue.serverTimestamp();\n            const data = {\n                text: entityText,\n                authorID: userID,\n                createdAt: timestamp,\n            };\n            entityRef\n                .add(data)\n                .then(_doc => {\n                    setEntityText('')\n                    Keyboard.dismiss()\n                })\n                .catch((error) => {\n                    alert(error)\n                });\n        }\n    }\n\n    const renderEntity = ({item, index}) => {\n        return (\n            <View style={styles.entityContainer}>\n                <Text style={styles.entityText}>\n                    {index}. {item.text}\n                </Text>\n            </View>\n        )\n    }\n\n    return (\n        <View style={styles.container}>\n            <View style={styles.formContainer}>\n                <TextInput\n                    style={styles.input}\n                    placeholder='Add new entity'\n                    placeholderTextColor=\"#aaaaaa\"\n                    onChangeText={(text) => setEntityText(text)}\n                    value={entityText}\n                    underlineColorAndroid=\"transparent\"\n                    autoCapitalize=\"none\"\n                />\n                <TouchableOpacity style={styles.button} onPress={onAddButtonPress}>\n                    <Text style={styles.buttonText}>Add</Text>\n                </TouchableOpacity>\n            </View>\n            { entities && (\n                <View style={styles.listContainer}>\n                    <FlatList\n                        data={entities}\n                        renderItem={renderEntity}\n                        keyExtractor={(item) => item.id}\n                        removeClippedSubviews={true}\n                    />\n                </View>\n            )}\n        </View>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}